{"openapi":"3.0.1","info":{"title":"Consent-app","description":"Сервис для хранения факта подписания документов","version":"0.1.17.CRM-21589"},"servers":[{"url":"/"}],"tags":[{"name":"ClientController"},{"name":"ConsentController"},{"name":"ConsentPreviewController"}],"paths":{"/consent/v0/{consentCode}/preview":{"post":{"tags":["ConsentPreviewController"],"summary":"Генерация файла согласия для предпросмотра","operationId":"generateConsent","parameters":[{"name":"consentCode","in":"path","required":true,"schema":{"type":"string","example":null,"enum":["PPD","TLK","RCL","CRO"]}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentPreviewRequest"},"example":null}},"required":true},"responses":{"200":{"description":"Согласия успешно сгенерированы","content":{"*/*":{"schema":{"type":"array","example":null,"items":{"type":"string","format":"byte","example":null}},"example":null}}}}}},"/consent/v0/consent/{siebelId}":{"post":{"tags":["ConsentController"],"summary":"Метод предназначен для создание согласий","operationId":"setConsents","parameters":[{"name":"x-source-channel","in":"header","description":"Канал согласия","required":false,"schema":{"type":"string","example":null}},{"name":"siebelId","in":"path","description":"Идентификатор клиента в CRM","required":true,"schema":{"type":"string","example":null}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetConsentsRequestDto"},"example":null}},"required":true},"responses":{"200":{"description":"Успешный результат","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseCreateConsentResponse"},"example":null}}}}}},"/consent/v0/consent/path":{"get":{"tags":["ConsentController"],"summary":"Метод предназначен для получения ссылок для скачивания документов из webstatic","operationId":"getConsentPath","parameters":[{"name":"consentTypeId","in":"query","description":"Идентификатор документа","required":true,"schema":{"type":"array","example":null,"items":{"type":"string","example":null}}}],"responses":{"200":{"description":"Успешный результат","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseListConsentTypeDto"},"example":null}}}}}},"/consent/v0/client/{siebelId}/consent/channel":{"get":{"tags":["ClientController"],"summary":"Метод предназначен для проверки факта подписания клиентом документов по каналам.","operationId":"checkConsentByChannel","parameters":[{"name":"siebelId","in":"path","description":"Идентификатор клиента в CRM","required":true,"schema":{"type":"string","example":null}},{"name":"channel","in":"query","description":"Канал согласия","required":false,"schema":{"type":"array","example":null,"items":{"type":"string","example":null}}}],"responses":{"200":{"description":"Успешный результат","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseCheckConsentResponse"},"example":null}}}}}}},"components":{"schemas":{"ConsentPreviewRequest":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserDto"}},"example":null},"UserDto":{"required":["name","passportDivisionCode","passportIssueDate","passportIssued","passportNumber","passportSeries","regAddress","surname"],"type":"object","properties":{"name":{"type":"string","description":"Имя","example":null},"surname":{"type":"string","description":"Фамилия","example":null},"patronymic":{"type":"string","description":"Отчество","example":null},"birthDate":{"type":"string","description":"Дата рождения","example":null},"placeBirth":{"type":"string","description":"Место рождения","example":null},"passportNumber":{"type":"string","description":"Номер паспорта","example":null},"passportSeries":{"type":"string","description":"Серия паспорта","example":null},"passportIssueDate":{"type":"string","description":"Дата выдачи паспорта","example":null},"regAddress":{"type":"string","description":"Адресс регистрации","example":null},"passportIssued":{"type":"string","description":"Орган выдавшний паспорт","example":null},"passportDivisionCode":{"type":"string","description":"Код подразделения выдавшего паспорт","example":null},"snils":{"type":"string","description":"СНИЛС","example":null},"inn":{"type":"string","description":"ИНН","example":null}},"description":"Данные о пользователе","example":null},"Consent":{"required":["acceptFlg","code"],"type":"object","properties":{"code":{"type":"string","description":"Код типа согласия","example":null},"acceptFlg":{"type":"boolean","description":"Факт установки согласия клиентом","example":null},"acceptStartDate":{"type":"string","description":"Дата получения согласия","format":"date-time","example":null},"acceptEndDate":{"type":"string","description":"Дата окончания согласия","format":"date-time","example":null}},"example":null},"SetConsentsRequestDto":{"required":["consent"],"type":"object","properties":{"consent":{"type":"array","example":null,"items":{"$ref":"#/components/schemas/Consent"}}},"example":null},"ConsentDto":{"type":"object","properties":{"acceptFlg":{"type":"boolean","description":"Факт установки согласия клиентом","example":null},"acceptDate":{"type":"string","description":"Дата установки клиентом согласия","format":"date-time","example":null},"consentTypeId":{"type":"string","description":"Идентификатор документа","example":null},"consentTypeName":{"type":"string","description":"Наименование документа","example":null},"consentCode":{"type":"string","description":"Код согласия","example":null},"dtStartAccept":{"type":"string","description":"Дата получения согласия","format":"date-time","example":null},"dtEndAccept":{"type":"string","description":"Дата окончания согласия","format":"date-time","example":null},"channel":{"type":"string","description":"Канал","example":null}},"description":"Информация по документам","example":null},"CreateConsentResponse":{"type":"object","properties":{"consents":{"type":"array","description":"Информация по документам","example":null,"items":{"$ref":"#/components/schemas/ConsentDto"}}},"example":null},"ResponseCreateConsentResponse":{"type":"object","properties":{"result":{"$ref":"#/components/schemas/ResponseMetaData"},"data":{"$ref":"#/components/schemas/CreateConsentResponse"}},"example":null},"ResponseMetaData":{"required":["code","message","status"],"type":"object","properties":{"timestamp":{"type":"string","format":"date-time","example":null},"status":{"maximum":527,"minimum":100,"type":"integer","format":"int32","example":null},"code":{"maxLength":10,"minLength":0,"type":"string","example":null},"message":{"type":"string","example":null},"debugInfo":{"type":"string","example":null}},"example":null},"ConsentTypeDto":{"type":"object","properties":{"consentTypeId":{"type":"string","description":"Идентификатор соглашения","example":null},"url":{"type":"string","description":"Ссылка для скачивания","example":null},"issueBy":{"type":"integer","description":"Срок действия","format":"int32","example":null},"bond":{"type":"string","description":"Типы согласий","example":null},"savingCode":{"type":"string","description":"Типы согласий для записи в БД","example":null}},"example":null},"ResponseListConsentTypeDto":{"type":"object","properties":{"result":{"$ref":"#/components/schemas/ResponseMetaData"},"data":{"type":"array","example":null,"items":{"$ref":"#/components/schemas/ConsentTypeDto"}}},"example":null},"CheckConsentResponse":{"type":"object","properties":{"consents":{"type":"array","example":null,"items":{"$ref":"#/components/schemas/ConsentDto"}}},"example":null},"ResponseCheckConsentResponse":{"type":"object","properties":{"result":{"$ref":"#/components/schemas/ResponseMetaData"},"data":{"$ref":"#/components/schemas/CheckConsentResponse"}},"example":null}},"securitySchemes":{"bearer-key":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}