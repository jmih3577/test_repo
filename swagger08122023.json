{"openapi":"3.0.1","info":{"title":"account-issue-api","description":"Сервис работы со счетами (открытие и закрытие)","version":"0.0.4.5"},"servers":[{"url":"/"}],"paths":{"/account-issue/v0/closeaccount/issue":{"post":{"tags":["AccountIssueController"],"summary":"Создать запрос на закрытие счёта","operationId":"createCloseAccountIssue","parameters":[{"name":"x-source-channel","in":"header","description":"Канал","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloseAccountRequestDto"}}},"required":true},"responses":{"500":{"description":"Системная ошибка","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response"}}}},"200":{"description":"Сервис отправил запрос на сохранение заявки в БД. Успешно. Возвращает id заявки","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response"}}}}}}},"/account-issue/v0/account/issue":{"post":{"tags":["AccountIssueController"],"summary":"Создать запрос на открытие дополнительного счёта","operationId":"createOpenAccountIssue","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpenAccountRequestDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseOpenAccountDto"}}}}}}},"/account-issue/v0/closeaccount/issue/{issue_id}/retentionresult":{"patch":{"tags":["AccountIssueController"],"summary":"Передача статуса заявки на удержание","operationId":"retentionCloseAccountIssue","parameters":[{"name":"issue_id","in":"path","description":"id запроса на проверку счёта","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetentionResultDto"}}},"required":true},"responses":{"200":{"description":"Сервис отправил запрос на удержание заявки. Успешно","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response"}}}},"500":{"description":"Системная ошибка","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response"}}}}}}},"/account-issue/v0/closeaccount/issue/{issue_id}/executed":{"patch":{"tags":["AccountIssueController"],"summary":"Исполнить запрос на закрытие счета","operationId":"executeCloseAccountIssue","parameters":[{"name":"issue_id","in":"path","description":"id запроса на закрытие счёта","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloseAccountExecuteDto"}}},"required":true},"responses":{"202":{"description":"Успешный ответ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response"}}}},"404":{"description":"Несуществующий issue_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response"}}}},"500":{"description":"Системная ошибка","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response"}}}},"504":{"description":"Таймаут","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response"}}}},"200":{"description":"Успешный ответ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response"}}}}}}},"/account-issue/v0/account/issue/{issue_id}/execute":{"patch":{"tags":["AccountIssueController"],"summary":"Исполнить запрос на открытие дополнительного счёта","operationId":"executeAccountIssue","parameters":[{"name":"issue_id","in":"path","description":"id запроса на открытие счёта","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseOpenAccountDto"}}}}}}}},"components":{"schemas":{"CloseAccountRequestDto":{"type":"object","properties":{"crmId":{"type":"string"},"dboProId":{"type":"string"},"organizationAccounts":{"type":"array","items":{"$ref":"#/components/schemas/OrganizationAccountDto"}}},"description":"запрос на закрытие счета"},"OrganizationAccountDto":{"type":"object","properties":{"bisId":{"type":"string"},"bisBranch":{"type":"string"},"accountNumbers":{"type":"array","items":{"type":"string"}}}},"Response":{"required":["result"],"type":"object","properties":{"result":{"$ref":"#/components/schemas/ResponseMetaData"},"data":{"type":"object"}}},"ResponseMetaData":{"required":["code","status","timestamp"],"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32","example":200},"code":{"type":"string"},"message":{"type":"string","example":"Ok"}}},"OpenAccountRequestDto":{"required":["bisBranch","bisId","crmId","currency","department"],"type":"object","properties":{"crmId":{"type":"string"},"bisId":{"type":"string"},"bisBranch":{"type":"string"},"department":{"type":"string"},"currency":{"type":"string","enum":["RUR","VED","NAD","MUR","HRK","DOP","NPR","IQD","BWP","CAD","WST","TTD","ZAR","LBP","SHP","FKP","KES","YER","SSP","DZD","HUF","NIO","MKD","PKR","LSL","MRU","CDF","RUB","MYR","BOB","HNL","VES","SLE","SLL","AUD","NGN","ANG","ALL","BND","KHR","MXN","CLP","SEK","XCD","UAH","ZMW","BIF","UGX","IRR","JOD","ERN","RWF","MZN","TWD","CRC","GMD","BHD","BTN","SCR","MOP","KRW","TZS","BGN","LRD","SGD","AOA","PHP","BSD","BZD","BBD","UYU","CUP","XAF","KYD","XPF","GBP","QAR","BDT","GYD","KMF","RSD","COU","XDR","KWD","SYP","MDL","ETB","SDG","GIP","PLN","KZT","EUR","HKD","JPY","CZK","USD","UZS","MNT","AED","NZD","AZN","EGP","PAB","SBD","ARS","BAM","BRL","VND","CUC","ILS","MAD","DJF","DKK","OMR","COP","LYD","CVE","SAR","JMD","GHS","BMD","FJD","SVC","GEL","SZL","GNF","THB","LKR","XOF","MMK","PEN","AFN","UYI","TOP","VUV","MWK","ZWL","ISK","MGA","PYG","LAK","SRD","PGK","STN","SOS","HTG","GTQ","MVR","AWG","INR","TND","KPW","IDR","TMT","NOK","BYN","CNY","CHF","RON","AMD","TRY","TJS","KGS"]},"accountType":{"type":"string","enum":["CD","CA"]}},"description":"запрос на открытие счета"},"OpenAccountDto":{"type":"object","properties":{"id":{"type":"string"},"openedAccount":{"type":"string"},"transitAccount":{"type":"string"}}},"ResponseOpenAccountDto":{"required":["result"],"type":"object","properties":{"result":{"$ref":"#/components/schemas/ResponseMetaData"},"data":{"$ref":"#/components/schemas/OpenAccountDto"}}},"RetentionResultDto":{"required":["result"],"type":"object","properties":{"result":{"type":"string","example":"retented/not retented","enum":["retented","not retented"]}},"description":"удержание счета"},"CloseAccountExecuteDto":{"type":"object","properties":{"closingReason":{"type":"integer","format":"int32"},"checkBook":{"type":"string"},"transferType":{"type":"integer","format":"int32"},"requisites":{"$ref":"#/components/schemas/RequisitesDto"}}},"RequisitesDto":{"type":"object","properties":{"accountRestTransferKind":{"type":"integer","format":"int32"},"purposeOfPayment":{"type":"string"},"nameOfThePayee":{"type":"string"},"innOfThePayee":{"type":"string"},"kppOfThePayee":{"type":"string"},"accountNumberOfThePayee":{"type":"string"},"bicOfThePayee":{"type":"string"},"corAccountNumberOfThePayee":{"type":"string"}}}}}}